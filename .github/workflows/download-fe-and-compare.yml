# This is a basic workflow to help you get started with Actions

name: Download & Compere FE

# Controls when the workflow will run
on:
  workflow_dispatch:
  workflow_call:
    inputs:
      current-version:
        required: true
        type: string

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # Steps represent a sequence of tasks that will be executed as part of the job
  download-fe:
    # The type of runner that the job will run on
    runs-on: windows-latest

    steps:
      - name: Get FE Filename
        run: |
          $url = "https://www.telerik.com/download/fiddler/fiddler-everywhere-windows"
          $webClient = New-Object System.Net.WebClient
          $html = $webClient.DownloadString($url)

          # Use regex to find the download link in the HTML
          if ($html -match 'href="([^"]*Fiddler Everywhere[^"]*\.exe)"') {
              $downloadUrl = $matches[1]
              $filename = [System.IO.Path]::GetFileName($downloadUrl)
          } else {
              $filename = "Filename not found in HTML."
          }

          Write-Host "Download filename: $filename"
